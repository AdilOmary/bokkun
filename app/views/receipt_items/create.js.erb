function refreshForm(innerHTML) {
  const newReceiptItemForm = document.getElementById('new_receipt_item');
  newReceiptItemForm.innerHTML = innerHTML;
  document.getElementById('receipt_item_name').value = '';
  document.getElementById('receipt_item_amount').value = '';
  document.getElementById('receipt_item_tax_8').checked = 'checked';
}

function addReceiptItem(receiptItemHTML) {
  const receiptItem = document.getElementById('receipt-table-body').firstElementChild;
  receiptItem.insertAdjacentHTML('beforebegin', receiptItemHTML);
}

<% if @receipt_item.errors.any? %>
  refreshForm('<%= j render "receipt_items/form", receipt: @receipt, receipt_item: @receipt_item %>');
<% else %>
  addReceiptItem('<%= j render "receipt_items/row", item: @receipt_item %>');
  refreshForm('<%= j render "receipt_items/form", receipt: @receipt, receipt_item: ReceiptItem.new %>');
<% end %>
